name: EnforceSquash
on:
  pull_request:
    branches: [ master ]

jobs:
  require_squash:
    name: Pull request must be squashed to single commit
    runs-on: ubuntu-latest
    env:
      LOG_URL: "https://github.com/${{github.repository}}/actions/runs/${{github.run_id}}"
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0
      - run: 'git rev-list --count ${{github.base_ref}}..${{github.sha}} | wc -l'
      - run: echo DONE
        
